import{a as h,u as p,r as g,j as e}from"./index-B0ulBnKu.js";import{c as y,d as x,T as j}from"./Toast--y4ywzNG.js";import{C}from"./CustomerForm-CD0Rh40J.js";const b="_container_125cq_1",f="_header_125cq_13",N="_title_125cq_27",B="_cancelButton_125cq_39",v="_loading_125cq_67",k="_error_125cq_69",q="_backButton_125cq_91",s={container:b,header:f,title:N,cancelButton:B,loading:v,error:k,backButton:q};function T(){const{id:l}=h(),c=p(),a=Number(l),{data:t,isLoading:u,error:m}=y(a),i=x(a),[r,o]=g.useState(null),d=async _=>{try{await i.mutateAsync(_),o({message:"Customer updated successfully!",type:"success"}),setTimeout(()=>{c(`/${a}`)},1500)}catch(n){n&&typeof n=="object"&&"status"in n&&n.status===409?o({message:"A customer with this email already exists.",type:"error"}):o({message:"Failed to update customer. Please try again.",type:"error"})}};return u?e.jsx("div",{className:s.container,children:e.jsx("div",{className:s.loading,children:"Loading customer..."})}):m||!t?e.jsx("div",{className:s.container,children:e.jsxs("div",{className:s.error,children:["Failed to load customer. Please try again.",e.jsx("button",{onClick:()=>c(`/${a}`),className:s.backButton,children:"Back to Details"})]})}):e.jsxs("div",{className:s.container,children:[r&&e.jsx(j,{message:r.message,type:r.type,onClose:()=>o(null)}),e.jsxs("div",{className:s.header,children:[e.jsx("h1",{className:s.title,children:"Edit Customer"}),e.jsx("button",{onClick:()=>c(`/${a}`),className:s.cancelButton,children:"Cancel"})]}),e.jsx(C,{onSubmit:d,defaultValues:{name:t.name,email:t.email,phone:t.phone,street:t.street||"",city:t.city||"",state:t.state||"",postalCode:t.postalCode||"",country:t.country||""},isSubmitting:i.isPending})]})}export{T as default};
