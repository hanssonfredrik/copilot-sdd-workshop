import{r as h,j as e,u as p}from"./index-B0ulBnKu.js";import{u as f,T as b,a as N}from"./Toast--y4ywzNG.js";import{C as y}from"./ConfirmDialog-CH1F-POw.js";const C="_container_3jkc6_1",v="_input_3jkc6_9",j={container:C,input:v};function w({onSearch:s,placeholder:c="Search customers...",debounceMs:a=300}){const[o,n]=h.useState("");return h.useEffect(()=>{const i=setTimeout(()=>{s(o)},a);return()=>clearTimeout(i)},[o,a,s]),e.jsx("div",{className:j.container,children:e.jsx("input",{type:"search",value:o,onChange:i=>n(i.target.value),placeholder:c,className:j.input,"aria-label":"Search customers"})})}const S="_container_o82fs_1",$="_table_o82fs_9",D="_row_o82fs_57",B="_actions_o82fs_81",P="_actionButton_o82fs_91",T="_deleteButton_o82fs_133",E="_loading_o82fs_149",k="_empty_o82fs_151",l={container:S,table:$,row:D,actions:B,actionButton:P,deleteButton:T,loading:E,empty:k};function I({customers:s,isLoading:c}){const a=p(),o=f(),[n,i]=h.useState(null),[r,m]=h.useState(null),x=async()=>{if(!n)return;const t=n.id,d=n.name;i(null);try{await o.mutateAsync(t),m({message:`${d} deleted successfully!`,type:"success"})}catch{m({message:"Failed to delete customer. Please try again.",type:"error"})}};return c?e.jsx("div",{className:l.loading,children:"Loading customers..."}):s.length===0?e.jsx("div",{className:l.empty,children:"No customers found"}):e.jsxs(e.Fragment,{children:[r&&e.jsx(b,{message:r.message,type:r.type,onClose:()=>m(null)}),e.jsx(y,{isOpen:n!==null,title:"Delete Customer",message:`Are you sure you want to delete ${n?.name}? This action cannot be undone.`,confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",onConfirm:x,onCancel:()=>i(null)}),e.jsx("div",{className:l.container,children:e.jsxs("table",{className:l.table,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"ID"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Phone"}),e.jsx("th",{children:"City"}),e.jsx("th",{children:"Signup Date"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:s.map(t=>e.jsxs("tr",{className:l.row,children:[e.jsx("td",{children:t.id}),e.jsx("td",{children:t.name}),e.jsx("td",{children:t.email}),e.jsx("td",{children:t.phone||"—"}),e.jsx("td",{children:t.city||"—"}),e.jsx("td",{children:new Date(t.signupDate).toLocaleDateString()}),e.jsx("td",{children:e.jsxs("div",{className:l.actions,children:[e.jsx("button",{onClick:d=>{d.stopPropagation(),a(`/${t.id}`)},className:l.actionButton,"aria-label":`View ${t.name}`,children:"View"}),e.jsx("button",{onClick:d=>{d.stopPropagation(),a(`/${t.id}/edit`)},className:l.actionButton,"aria-label":`Edit ${t.name}`,children:"Edit"}),e.jsx("button",{onClick:d=>{d.stopPropagation(),i(t)},className:`${l.actionButton} ${l.deleteButton}`,"aria-label":`Delete ${t.name}`,children:"Delete"})]})})]},t.id))})]})})]})}const L="_container_z9gb4_1",z="_info_z9gb4_23",A="_controls_z9gb4_33",F="_pageInfo_z9gb4_45",R="_button_z9gb4_55",u={container:L,info:z,controls:A,pageInfo:F,button:R};function V({currentPage:s,totalCount:c,pageSize:a,onPageChange:o}){const n=Math.ceil(c/a);if(n<=1)return null;const i=(s-1)*a+1,r=Math.min(s*a,c);return e.jsxs("div",{className:u.container,children:[e.jsxs("div",{className:u.info,children:["Showing ",i,"–",r," of ",c]}),e.jsxs("div",{className:u.controls,children:[e.jsx("button",{onClick:()=>o(s-1),disabled:s===1,className:u.button,"aria-label":"Previous page",children:"Previous"}),e.jsxs("span",{className:u.pageInfo,children:["Page ",s," of ",n]}),e.jsx("button",{onClick:()=>o(s+1),disabled:s===n,className:u.button,"aria-label":"Next page",children:"Next"})]})]})}const Q="_container_lrwsl_1",G="_header_lrwsl_13",M="_title_lrwsl_21",O="_subtitle_lrwsl_33",Z="_error_lrwsl_45",_={container:Q,header:G,title:M,subtitle:O,error:Z},g=50;function U(){const[s,c]=h.useState(""),[a,o]=h.useState(1),{data:n,isLoading:i,error:r}=N({search:s,page:a,pageSize:g}),m=t=>{c(t),o(1)},x=t=>{o(t),window.scrollTo({top:0,behavior:"smooth"})};return e.jsxs("div",{className:_.container,children:[e.jsxs("div",{className:_.header,children:[e.jsx("h1",{className:_.title,children:"Customers"}),e.jsx("p",{className:_.subtitle,children:"Search and view customer information"})]}),e.jsx(w,{onSearch:m,placeholder:"Search by name, email, or phone..."}),r&&e.jsx("div",{className:_.error,children:"Failed to load customers. Please try again."}),e.jsx(I,{customers:n?.items||[],isLoading:i}),n&&e.jsx(V,{currentPage:a,totalCount:n.total,pageSize:g,onPageChange:x})]})}export{U as default};
